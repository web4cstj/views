<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <title>Introduction à Laravel et aux views</title>
</head>
<body>
    <div class="interface">
        <header>
            <h1>Introduction à Laravel et aux views</h1>
        </header>
        <footer>&copy; Cégep de Saint-Jérôme &mdash; Département des techniques d'intégration multimédia</footer>
        <div class="body">
            <h2>Installer un projet laravel</h2>
            <h3>Installer WampServer</h3>
            <p>Wampserver est une série d'applications permettant de simuler une serveur Web sur sa propre machine.</p>
            <ol>
                <li>Suivre les instructions à la page suivante : <a href="http://web4.tim-cstj.ca/cours01_serveur.php">http://web4.tim-cstj.ca/cours01_serveur.php</a></li>
            </ol>
            <h3>Installer Composer</h3>
            <p>Composer est un gestionnaire de paquets permettant d'installer des composantes PHP ou des projets PHP.</p>
            <ol>
                <li>Télécharger l'installateur de Composer à l'adresse suivante : <a href="https://getcomposer.org/download/">https://getcomposer.org/download/</a></li>
                <li>Exécuter l'installateur</li>
                <li>Tester l'installation dans un terminal à l'aide de la commande : <code class="cmd">composer -V</code></li>
                <li>Si on obtient un message d'erreur, contacter Martin Boudreau</li>
            </ol>
            <h3>Récupérer un projet de Github</h3>
            <ol>
                <li>Télécharger ou cloner le projet sur Github. Pour l'exemple, prendre la branche "<strong>views</strong>" du dépôt suivant <a href="https://github.com/web4cstj/pokemons-laravel">https://github.com/web4cstj/pokemons-laravel</a></li>
                <li>Récupérer l'application Laravel à l'aide de la commande <code class="cmd">composer update</code>. Cette opération peut prendre un certain temps.</li>
                <li>Renommer le fichier <code class="fic">.env.example</code> pour <code class="fic">.env</code>.</li>
                <li>Régler les coordonnées de la base de données dans le fichier <code class="fic">.env</code>. Pour l'exemple, régler les informations suivantes :
                    <div class="code">
                        <div>DB_CONNECTION=sqlite</div>
                        <div>DB_DATABASE="C:\chemin\vers\le\dossier\database\mondepokemons.sqlite"</div>
                    </div>
                </li>
            </ol>
            <h3>Démarrer le serveur</h3>
            <ol>
                <li>Exécuter la commande de terminal <code class="cmd">php artisan serve</code></li>
                <li>Visiter l'adresse <code class="fic">http://localhost:8000</code>. En temps normal, il devrait y avoir la page d'accueil de Laravel, mais pour l'exemple "Monde Pokémons", cela affichera un message d'erreur.</li>
            </ol>
            <h2>Les fichiers de template</h2>
            <p>Pour les fins du tutoriel, on a créé une série de fichiers reproduisant le fonctionnement de l'application finale.</p>
            <ol>
                <li>À l'aide de Live Server, visionner la page <code class="fic">_temporaire/templates/pokemon_index.html</code> (Bouton de droite sur le fichier puis choisir <code>Open with Live Server</code>)</li>
                <li>Visiter l'application en cliquant sur les divers liens.</li>
                <li>S'approprier le code en regardant le HTML des divers fichiers ainsi que le fichier CSS.</li>
            </ol>
            <h2>Résumé de Laravel et du MVC</h2>
            <p>Laravel suit le modèle de programmation MVC : Model, View, Controller</p>
            <ul>
                <li><strong>Model</strong> : Portion de l'application qui gère les données.</li>
                <li><strong>View</strong> : Portion de l'application qui gère l'affichage.</li>
                <li><strong>Controller</strong> : Portion de l'application qui gère les actions et processus.</li>
            </ul>
            <p>En ce qui nous concerne, seule la portion View nous concerne.</p>
            <h2>Les views en général</h2>
            <ul>
                <li>Laravel utilise un système de template appelé Blade.</li></li>
                <li>Les fichiers créés pour le système Blade ont l'extension <code class="fic">.blade.php</code> et doivent être créés dans le dossier <code class="fic">resources/views</code></li>
                <li>Dans le dossier <code class="fic">views</code>, on peut créer des sous-dossiers et adapter en conséquence le "chemin" vers ces fichiers</li>
                <li>Les fichiers de views (<code class="fic">.blade.php</code>) sont appelés par les actions d'un controller ou par un autre fichier de view.</li>
                <li>Il existe une façon raccourcie propre à Blade d'indiquer l'emplacement d'une view. Voici quelques exemples :
                    <table border="1">
                        <tr>
                            <td>@include('index')</td>
                            <td>Chargera le fichier "&hellip;/resources/views/index.blade.php"</td>
                        </tr>
                        <tr>
                            <td>@include('layout.index')</td>
                            <td>Chargera le fichier "&hellip;/resources/views/layout/index.blade.php"</td>
                        </tr>
                        <tr>
                            <td>@include('layout.menus.principal')</td>
                            <td>Chargera le fichier "&hellip;/resources/views/layout/menus/principal.blade.php"</td>
                        </tr>
                    </table>
                </li>
            </ul>
            <h3>La view la plus simple (pas de html)</h3>
            <p>Une view, c'est ce que ressemble le plus à une page HTML en Laravel.</p>
            <ol>
                <li>Visiter l'adresse <code class="fic">http://localhost:8000/pokemon</code>. Il devrait y avoir une erreur indiquant qu'il manque une view.</li>
                <li>Créer un dossier <code class="fic">pokemon</code> dans le dossier <code class="fic">views</code>.</li>
                <li>Dans le dossier <code class="fic">pokemon</code>, créer un fichier nommé <code class="fic">index.blade.php</code>.</li>
                <li>Y ajouter le texte <code>allo</code> et sauvegarder.</li>
                <li>Rafraîchir la page du fureteur. Il devrait être écrit <code>allo</code>.</li>
                <li>Visionner le code source de la page, il devrait être écrit <code>allo</code> (pas de code HTML supplémentaire)</li>
            </ol>
            <h3>On ajoute une variable</h3>
            <p>Presque toutes les views recevront &ndash; soit d'un controller, soit d'une autre view &ndash; une série de variables que l'on doit habituellement uiliser pour faire afficher les données.</p>
            <ol>
                <li>Dans la view, ajouter le code suivant : <code class="vs">{{$pokemons}}</code></li>
                <li>Tester la page. Il devrait y avoir un JSON contenant les 20 premiers pokémons.</li>
                <li>Changer le code pour ceci: <code class="vs">{{$pokemons[0]}}</code></li>
                <li>Tester la page. Il devrait y avoir un JSON décrivant le premier pokémon.</li>
                <li>Changer le code pour ceci: <code class="vs">{{$pokemons[0]->nom_fr}}</code></li>
                <li>Tester la page. Il devrait y avoir le nom du premier pokémon.</li>
                <li>En dessous dans la view, ajouter le code suivant :
                    <div class="bloccode vs">
                        <div>&lt;ul&gt;</div>
                        <div>   @foreach($pokemons as $pokemon)</div>
                        <div>      &lt;li&gt;{{$pokemon-&gt;nom_fr}}&lt;/li&gt;</div>
                        <div>   @endforeach</div>
                        <div>&lt;/ul&gt;</div>
                    </div>
                </li>
                <li>On a maintenant la liste des noms des 20 premiers pokémons avec le bon HTML (voir la source)</li>
            </ol>
            <h3>Les types de données et comment les afficher</h3>
            <h2>Normaliser une view</h2>
            <h2>La distinction contenu-contenant</h2>
            <h2>La page maîtresse</h2>
            <h2>Structures dans les views</h2>
            Référence : https://summerblue.github.io/laravel5-cheatsheet/#blade
        </div>
    </div>

</body>
</html>